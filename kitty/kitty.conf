# kitty.conf - My kitty terminal configuration.

#===============================================================================
# FONTS
#===============================================================================
# Defaults
# --------
font_size               11.0
modify_font cell_width  100%
modify_font cell_height 100%

# Do not show ligatures. Sanity check: -> => |> <| ft fi li // !=
disable_ligatures cursor

# Fonts with problems
# -------------------
# # Italic 'M' is cropped (tested in sizes 11 and 14)
# font_family family='CommitMono'

# JuliaMono
# ---------
# # ss01: alt a, ss06: alt g, cv03: alt ~
font_family      postscript_name=JuliaMono-Regular
bold_font        postscript_name=JuliaMono-Bold
italic_font      postscript_name=JuliaMono-RegularItalic
bold_italic_font postscript_name=JuliaMono-BoldItalic
font_features JuliaMono-Regular         -zero +calt +ss01 +ss06 +cv03
font_features JuliaMono-RegularItalic   -zero +calt +ss01 +ss06 +cv03
font_features JuliaMono-Medium          -zero +calt +ss01 +ss06 +cv03
font_features JuliaMono-MediumItalic    -zero +calt +ss01 +ss06 +cv03
font_features JuliaMono-Bold            -zero +calt +ss01 +ss06 +cv03
font_features JuliaMono-BoldItalic      -zero +calt +ss01 +ss06 +cv03
font_features JuliaMono-ExtraBoldItalic -zero +calt +ss01 +ss06 +cv03

# IBM Plex Mono
# -------------
# # ss01: alt a, ss02: alt g. Italic uses them by default.
# # font_size 13.0
# font_family postscript_name=IBMPlexMono
# italic_font postscript_name=IBMPlexMono-MedmItalic
# font_features IBMPlexMono            zero ss01 ss02 frac
# font_features IBMPlexMono-Medm       zero ss01 ss02 frac
# font_features IBMPlexMono-Italic     zero frac
# font_features IBMPlexMono-MedmItalic zero frac

# Cascadia Code
# -------------
# # ss01: cursive italics
# font_size 13
# font_family family='Cascadia Code' wght=380 features='+calt +ss01 +ss19 +ss20'

# InputMono
# ---------
# [info]: https://input.djr.com/preview/
# # ss01: alt a; ss02: alt g; ss03, ss05, ss07, ss09: alts i; ss04, ss06, ss08,
# # ss10: alts l; ss11: alt *; ss12: alt {}; ss13: alt 0 wo dot
# # font_size        11.0
# font_family      postscript_name=InputMono-Regular
# bold_font        postscript_name=InputMono-Bold
# italic_font      postscript_name=InputMono-Italic
# bold_italic_font postscript_name=InputMono-BoldItalic
# font_features InputMono-Bold             +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-BoldItalic       +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-ExtraLight       +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-ExtraLightItalic +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-Italic           +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-Light            +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-LightItalic      +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-Medium           +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-MediumItalic     +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11
# font_features InputMono-Regular          +ss01 +ss02 +ss05 +ss06 -ss09 -ss10 +ss11

# Unifont
# -------
# font_size               12.0
# modify_font cell_width  50%
# modify_font cell_height 3px
# font_family             family=Unifont

# Victor Mono
# -----------
# ss01: alt a; ss02-05: alt 0; ss06: alt 7; ss07: alt 6/9; ss08: fish ::<
# font_size 11.0
# font_family family="Victor Mono" features="-calt -ss01 -ss02 -ss03 -ss04 -ss05 -ss07 -ss08"
# modify_font cell_width 1.1
# modify_font cell_height 0

# Source Code Pro
# ---------------
# # zero: reversed dashed zero; cv01: alt a; cv02: alt g; cv17: alt 1;
# # ss02: alt a; ss03: alt g; ss04: alt i+l
# font_size 13.0
# font_family family='Source Code Pro' features='+zero +cv01 +cv02 +cv17' wght=500

# JetBrains Mono
# --------------
# [note] Dashed zero doesn't work well (not proportional) when font size is 11.
# font_size 12.0
# font_family family='JetBrains Mono' features='+ss01 +ss19 +ss20 -zero +cv99' wght=200
# font_family family='JetBrains Mono' features='+ss02 +cv99' wght=400
# font_family family='JetBrains Mono' features='-calt +zero +ss01 +ss02 -ss19 -ss20 +cv99'

# Maple Mono
# ----------
# Features docs:
#   https://github.com/subframe7536/maple-font/blob/ce73674a5a4a5485bd8cc94961c594cd1c856ce0/source/features/README.md#features
# Ligatures test:
#   ss01: Broken multiple equals ligatures (==, ===, !=, !== ...)
#   ss02: Broken compare and equal ligatures (<=, >=)
#   ss03: Allow to use any case in all tags
# [todo] Check the next two, currently using the defaults:
#   ss04: Broken multiple underscores ligatures (__, #__)
#   ss06: Break connected strokes between italic letters (al, il, ull ...)
# [note] Best style per theme: light -> SemiBold, dark -> Regular
# font_family family='Maple Mono' style=SemiBold features='+ss01 +ss02 +ss03'

# Other fonts
# -----------
# font_family family='Adwaita Mono' features='+zero'
# font_family family='Rec Mono Linear' features=''
# font_family family='Geist Mono' features=''
# font_family family='Inconsolata Condensed' features='+dlig'
# font_family family='Inconsolata' features='+dlig'
# font_family family='Intel One Mono' features=''
# font_family family='DM Mono' features=''
# font_family family='Space Mono' features=''
# font_family family='Sometype Mono' features=''
# [todo] Figure out what alternates are these.
# font_family family='Fira Code' features='+calt +cv16 +cv27 +cv30 +cv31 +ss08'

# Next font above.

#===============================================================================
# NERD FONTS OVERRIDE (Nerd Fonts v3.2.0)
#===============================================================================
#
# kitty has embedded support for Nerd Fonts through the following `symbol_map`
# and the Symbols Nerd Font Mono. Unfortunately, it renders really big symbols.
# Setting `narrow_symbols` does help, but the symbols end up at the bottom of
# the cell and I still haven't found a way to fix that. Tried:
#
#     modify_font baseline 3
#
# but it pushes all chars up. For now, I'm overriding nerd symbols with the ones
# from a symbols-only Nerd Font (with good symbol size) and using kitty's
# default as a fallback.

# [todo] Figure out how to control the size of these symbols.
symbol_map U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d7,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+ed00-U+efc1,U+f000-U+f2ff,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f533,U+f0001-U+f1af0 Symbols Nerd Font Mono

# [todo] Figure out how to fix the baseline issue for this.
# narrow_symbols U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d7,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+ed00-U+efc1,U+f000-U+f2ff,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f533,U+f0001-U+f1af0 1
# modify_font baseline 3

# [note] Workaround to get smaller symbols. Remove after fixing the above TODOs.
symbol_map U+e000-U+e00a,U+ea60-U+ebeb,U+e0a0-U+e0c8,U+e0ca,U+e0cc-U+e0d7,U+e200-U+e2a9,U+e300-U+e3e3,U+e5fa-U+e6b1,U+e700-U+e7c5,U+ed00-U+efc1,U+f000-U+f2ff,U+f000-U+f2e0,U+f300-U+f372,U+f400-U+f533,U+f0001-U+f1af0 Symbols Nerd Font

#===============================================================================
# THEMES, COLORS AND STYLES
#===============================================================================

# Apply theme early, so we can override some parts later.
# include ./Atom One Light.conf
# include ./Ayu Mirage.conf
# include ./Dainty Dark.conf
# include ./GitHub Dark Dimmed.conf
# include ./GitHub Dark.conf
# include ./Solarized Dark.conf
# include ./Tokyo Night Day.conf
# include ./Tokyo Night Moon.conf
# include ./Tokyo Night Storm.conf
# include ./Tokyo Night.conf
include ./Night Owl.conf

# Next theme above.

# Bright dark pink.
# cursor #ff007f
# cursor_text_color #fff

# # Orange red.
# cursor #ff4500
# cursor_text_color #fff

# How kitty tabs are displayed (usually at the bottom left).
tab_bar_style powerline
# When using powerline tab_bar_style, how the separators are drawn.
tab_powerline_style slanted

# Hide window title and borders.
hide_window_decorations no
# What should be in the window title.
tab_title_template "{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{tab.last_focused_progress_percent}{tab.active_exe}"

# Control background opacity with keymaps.
dynamic_background_opacity yes
# The initial background opacity.
background_opacity 1

#===============================================================================
# MAPPINGS
#===============================================================================

# tmux-like mappings.
map ctrl+q>r load_config_file
map ctrl+q>c new_tab_with_cwd
map ctrl+q>- launch --cwd=current
map ctrl+q>| launch --cwd=current
map ctrl+q>ctrl+l next_tab
map ctrl+q>ctrl+h previous_tab
map ctrl+q>j next_window
map ctrl+q>k previous_window
map ctrl+q>l next_window
map ctrl+q>h previous_window

# Search word in Google dictionary (will open a web browser).
map ctrl+q>g kitten hints --customize-processing ./kittens/google_dictionary.py

#---------
# ALIASES
#---------

action_alias use_less_with_neovim_for_screen_scrollback launch --stdin-source=@screen_scrollback --stdin-add-formatting --type=overlay ${HOME}/.config/kitty/scripts/less-tempfile.sh

action_alias use_less_with_neovim_for_last_cmd_output launch --stdin-source=@last_cmd_output --stdin-add-formatting --type=overlay ${HOME}/.config/kitty/scripts/less-tempfile.sh

# Change default keybindings to use improved less+nvim integration.
map ctrl+shift+g use_less_with_neovim_for_last_cmd_output
map ctrl+shift+h use_less_with_neovim_for_screen_scrollback

# Always open new tabs in the current working directory.
map ctrl+shift+enter launch --cwd=current
map ctrl+shift+t new_tab_with_cwd

# Toggle fullscreen.
map f11 toggle_fullscreen

# Next mappings/keymaps/keybindings/shortcuts above.
#-------------------------------------------------------------------------------
# DOCS AND ARCHIVE {{{

# Docs
# ----

# Default kitty shortcuts/mappings/keybindings {{{
#
#
# Action                         | Shortcut
# ------------------------------------------------------------------------------
#                                |
# -- Scrolling --                |
#                                |
# Line up                        | ctrl+shift+up (also ⌥+⌘+⇞ and ⌘+↑ on macOS)
# Line down                      | ctrl+shift+down (also ⌥+⌘+⇟ and ⌘+↓ on macOS)
# Page up                        | ctrl+shift+page_up (also ⌘+⇞ on macOS)
# Page down                      | ctrl+shift+page_down (also ⌘+⇟ on macOS)
# Top                            | ctrl+shift+home (also ⌘+↖ on macOS)
# Bottom                         | ctrl+shift+end (also ⌘+↘ on macOS)
# Previous shell prompt          | ctrl+shift+z (see Shell integration)
# Next shell prompt              | ctrl+shift+x (see Shell integration)
# Browse scrollback in less      | ctrl+shift+h
# Browse last cmd output         | ctrl+shift+g (see Shell integration)
#                                |
# -- Tabs --                     |
#                                |
# New tab                        | ctrl+shift+t (also ⌘+t on macOS)
# Close tab                      | ctrl+shift+q (also ⌘+w on macOS)
# Next tab                       | ctrl+shift+right (also ⇧+⌃+⇥ and ⇧+⌘+] on macOS)
# Previous tab                   | ctrl+shift+left (also ⇧+⌃+⇥ and ⇧+⌘+[ on macOS)
# Next layout                    | ctrl+shift+l
# Move tab forward               | ctrl+shift+.
# Move tab backward              | ctrl+shift+,
# Set tab title                  | ctrl+shift+alt+t (also ⇧+⌘+i on macOS)
#                                |
# -- Windows --                  |
#                                |
# New window                     | ctrl+shift+enter (also ⌘+↩ on macOS)
# New OS window                  | ctrl+shift+n (also ⌘+n on macOS)
# Close window                   | ctrl+shift+w (also ⇧+⌘+d on macOS)
# Resize window                  | ctrl+shift+r (also ⌘+r on macOS)
# Next window                    | ctrl+shift+]
# Previous window                | ctrl+shift+[
# Move window forward            | ctrl+shift+f
# Move window backward           | ctrl+shift+b
# Move window to top             | ctrl+shift+`
# Visually focus window          | ctrl+shift+f7
# Visually swap window           | ctrl+shift+f8
# Focus specific window          | ctrl+shift+n (n=1 … 0) (also ⌘+1 … 9 on macOS)
#                                | (clockwise from the top-left)
#                                |
# -- Other keyboard shortcuts -- |
#                                |
# Show this help                 | ctrl+shift+f1
# Copy to clipboard              | ctrl+shift+c (also ⌘+c on macOS)
# Paste from clipboard           | ctrl+shift+v (also ⌘+v on macOS)
# Paste from selection           | ctrl+shift+s
# Pass selection to program      | ctrl+shift+o
# Increase font size             | ctrl+shift+equal (also ⌘++ on macOS)
# Decrease font size             | ctrl+shift+minus (also ⌘+- on macOS)
# Restore font size              | ctrl+shift+backspace (also ⌘+0 on macOS)
# Toggle fullscreen              | ctrl+shift+f11 (also ⌃+⌘+f on macOS)
# Toggle maximized               | ctrl+shift+f10
# Input Unicode character        | ctrl+shift+u (also ⌃+⌘+space on macOS)
# Open URL in web browser        | ctrl+shift+e
# Reset the terminal             | ctrl+shift+delete (also ⌥+⌘+r on macOS)
# Edit kitty.conf                | ctrl+shift+f2 (also ⌘+, on macOS)
# Reload kitty.conf              | ctrl+shift+f5 (also ⌃+⌘+, on macOS)
# Debug kitty.conf               | ctrl+shift+f6 (also ⌥+⌘+, on macOS)
# Open a kitty shell             | ctrl+shift+escape
# Increase background opacity    | ctrl+shift+a>m
# Decrease background opacity    | ctrl+shift+a>l
# Full background opacity        | ctrl+shift+a>1
# Reset background opacity       | ctrl+shift+a>d
#
# }}}

# Fonts docs
# ----------

# WARN: Kitty doesn't work well with patched fonts (like Nerd Fonts).
#
# WARN: Sometimes Kitty crops some fonts, mostly in italic/oblique versions, but it depends on
# the font and the size.
#
# INFO: Regarding font cropping, take a look here, as Kitty's creator explains a
# bit about it:
# https://github.com/kovidgoyal/kitty/issues/523#issuecomment-386849914

# INFO: Related to `force_ltr`, see the docs for more if this is relevant.
#
# font_features "MesloLGS Nerd Font" +isol -medi -fina -init

# }}}
#-------------------------------------------------------------------------------

# Backup nvim settings.
# vim: tw=80 ts=2 sw=2 ai et ff=unix fenc=utf-8 et fixeol eol fdm=marker fdl=0 fen ft=conf
